From e19d24c40d99d446c742b4c31f9a9bb7ff475e7b Mon Sep 17 00:00:00 2001
From: ReinWD <ReinWDD@gmail.com>
Date: Sun, 8 Dec 2019 17:11:08 +0800
Subject: [PATCH] fix villiger swimming behavior

---
 src/main/java/net/minecraft/server/BehaviorFindPosition.java | 4 ++--
 src/main/java/net/minecraft/server/EntityVillager.java       | 6 ++++++
 2 files changed, 8 insertions(+), 2 deletions(-)

diff --git a/src/main/java/net/minecraft/server/BehaviorFindPosition.java b/src/main/java/net/minecraft/server/BehaviorFindPosition.java
index 2fa0c062a..c4464d875 100644
--- a/src/main/java/net/minecraft/server/BehaviorFindPosition.java
+++ b/src/main/java/net/minecraft/server/BehaviorFindPosition.java
@@ -32,7 +32,7 @@ public class BehaviorFindPosition extends Behavior<EntityCreature> {
 
     protected void a(WorldServer var0, EntityCreature var1, long var2) {
         this.f = 0;
-        this.d = var0.getTime() + (long)var0.getRandom().nextInt(100);
+        this.d = var0.getTime() + (long)var0.getRandom().nextInt(20);
         VillagePlace var4 = var0.B();
         Predicate<BlockPosition> var5 = (var0x) -> {
             long var11 = var0x.asLong();
@@ -41,7 +41,7 @@ public class BehaviorFindPosition extends Behavior<EntityCreature> {
             } else if (++this.f >= 5) {
                 return false;
             } else {
-                this.e.put(var11, this.d + 120L);
+                this.e.put(var11, this.d + 40L);
                 return true;
             }
         };
diff --git a/src/main/java/net/minecraft/server/EntityVillager.java b/src/main/java/net/minecraft/server/EntityVillager.java
index 019bae959..597825989 100644
--- a/src/main/java/net/minecraft/server/EntityVillager.java
+++ b/src/main/java/net/minecraft/server/EntityVillager.java
@@ -143,12 +143,18 @@ public class EntityVillager extends EntityVillagerAbstract implements Reputation
     }
     // Spigot End
 
+    BehaviorSwim swim = new BehaviorSwim(0.4F, 0.8F);
+
     @Override
     protected void mobTick() {
         this.world.getMethodProfiler().enter("brain");
         if (ThreadLocalRandom.current().nextInt(100)<50) {
             this.getBehaviorController().a((WorldServer) this.world, this); // CraftBukkit - decompile error
         }
+        long var2 = this.world.getTime();
+        swim.b((WorldServer) this.world, this, var2);
+        swim.c((WorldServer) this.world, this, var2);
+
         this.world.getMethodProfiler().exit();
         if (!this.dY() && this.bE > 0) {
             --this.bE;
-- 
2.11.0

